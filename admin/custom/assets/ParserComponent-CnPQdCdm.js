import{j as t}from"./jsx-runtime-Dp5PRgGz.js";import{R as O}from"./ConfigCustomParserSet__loadShare__react__loadShare__-CoJWoTbj.js";import{C as a,a as y}from"./ConfigCustomParserSet__loadShare___mf_0_mui_mf_1_icons_mf_2_material__loadShare__-C6s5_10z.js";import{C as r}from"./ConfigCustomParserSet__loadShare___mf_0_iobroker_mf_1_adapter_mf_2_react_mf_2_v5__loadShare__-H8d5-6Pj.js";import{C as k,i as D}from"./ConfigCustomParserSet__mf_v__runtimeInit__mf_v__-BxgeTDyn.js";const{loadShare:R}=D,{initPromise:N}=k,J=N.then(x=>R("@iobroker/json-config",{customShareInfo:{shareConfig:{singleton:!0,strictVersion:!1,requiredVersion:"*"}}})),E=await J.then(x=>x());var F=E;const l={cell:{padding:"6px 3px"},colIndex:{width:20},colActive:{width:50},colName:{width:150},colUrl:{},colRegEx:{},colItem:{width:70},colRole:{width:70,textAlign:"center"},colType:{width:70,textAlign:"center"},colComma:{width:50},colUnit:{width:70},colSubstituteOld:{width:45,textAlign:"center"},colSubstitute:{width:70},colFactor:{width:50},colOffset:{width:50},colInterval:{width:50},colButtons:{width:140,textAlign:"right"},changedRow:{backgroundColor:"#795d5d"},marginRight:{marginRight:10},item:{width:50,marginLeft:10},regex:{width:"calc(100% - 100px)"},dialog:{},testText:x=>({"& textarea":{width:"100%",height:150,resize:"none",backgroundColor:x.palette.mode==="dark"?"#333":"#fff",color:x.palette.mode==="dark"?"#fff":"#000"}}),input:{width:100},resultUpdated:x=>({"& label":{color:x.palette.mode==="dark"?"#fff":"#000",animation:"admin-parser-blink 1000ms ease-in-out"},"& input":{color:x.palette.mode==="dark"?"#fff":"#000",animation:"admin-parser-blink 1000ms ease-in-out"}})};class P extends F.ConfigGeneric{namespace;testTextRef;timerTest=null;saveTimer=null;constructor(s){super(s),this.state={...this.state,showEditDialog:null,rules:null,error:!1,showDeleteDialog:null,testText:"Test text",testResult:"",testError:"",changed:[],resultIndex:0,alive:!1,originalRule:""},this.namespace=`${this.props.oContext.adapterName}.${this.props.oContext.instance}.`,this.testTextRef=O.createRef()}async componentDidMount(){super.componentDidMount();const s=await this.props.oContext.socket.getObjectViewSystem("state",this.namespace,`${this.namespace}é¦™`),e=await this.props.oContext.socket.getState(`system.adapter.${this.namespace}alive`).catch(()=>null),n=Object.keys(s).map(i=>{const c=s[i];return{_id:i,common:{name:i.substring(this.namespace.length),enabled:c.common.enabled!==!1,role:c.common.role,type:c.common.type,unit:c.common.unit},native:{link:c.native.link,item:c.native.item||0,regex:c.native.regex,interval:c.native.interval,substitute:c.native.substitute,substituteOld:c.native.substituteOld,offset:c.native.offset,factor:c.native.factor,parseHtml:c.native.parseHtml}}});n.sort((i,c)=>i.common.name.localeCompare(c.common.name)),this.setState({rules:n,alive:e?e.val:!1}),await this.props.oContext.socket.subscribeObject(`${this.namespace}*`,this.onObjectChange),await this.props.oContext.socket.subscribeState(`system.adapter.${this.namespace}*`,this.onAliveChange)}async componentWillUnmount(){await this.props.oContext.socket.unsubscribeObject(`${this.namespace}*`,this.onObjectChange),this.props.oContext.socket.unsubscribeState(`system.adapter.${this.namespace}*`,this.onAliveChange),this.timerTest&&clearTimeout(this.timerTest),this.timerTest=null}onObjectChange=(s,e)=>{if(!s)return;const n=JSON.parse(JSON.stringify(this.state.rules)),i=n.findIndex(c=>c._id===s);if(!e)i!==-1&&(n.splice(i,1),this.setState({rules:n}));else{if(i!==-1){if(n[i]={_id:s,common:{name:s.substring(this.namespace.length),enabled:e.common.enabled!==!1,role:e.common.role,type:e.common.type,unit:e.common.unit,read:!0,write:!1},native:{link:e.native.link,item:e.native.item||0,regex:e.native.regex,interval:e.native.interval,substitute:e.native.substitute,substituteOld:e.native.substituteOld,offset:e.native.offset,factor:e.native.factor,parseHtml:e.native.parseHtml}},JSON.stringify(this.state.rules[i])===JSON.stringify(n[i]))return;console.log("Detected change"),console.log(`old: ${JSON.stringify(this.state.rules[i])}`),console.log(`new: ${JSON.stringify(n[i])}`)}else n.push({_id:s,common:{name:s.substring(this.namespace.length),enabled:e.common.enabled!==!1,role:e.common.role,type:e.common.type,unit:e.common.unit},native:{link:e.native.link,item:e.native.item||0,regex:e.native.regex,interval:e.native.interval,substitute:e.native.substitute,substituteOld:e.native.substituteOld,offset:e.native.offset,factor:e.native.factor,parseHtml:e.native.parseHtml}});n.sort((c,g)=>c.common.name.localeCompare(g.common.name)),this.setState({rules:n})}};onAliveChange=(s,e)=>{s===`system.adapter.${this.namespace}alive`&&this.state.alive!==!!(e!=null&&e.val)&&this.setState({alive:!!(e!=null&&e.val)})};requestData(s){this.state.alive&&this.props.oContext.socket.sendTo(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,"link",s).then(e=>{e&&(e.error?window.alert(e.error):this.setState({testText:e.text||""}))})}renderEditDialog(){if(!this.state.showEditDialog)return null;const s=this.state.showEditDialog;return t.jsxs(a.Dialog,{maxWidth:"lg",fullWidth:!0,open:!0,onClose:()=>{},sx:{"& .MuiDialog-paper":l.dialog},children:[t.jsxs(a.DialogTitle,{children:[r.I18n.t("parser_Test regex"),":",t.jsx("span",{style:{fontStyle:"italic",fontWeight:"bold",marginLeft:10},children:this.state.showEditDialog.common.name})]}),t.jsx(a.DialogContent,{children:t.jsxs(a.Grid,{container:!0,spacing:2,children:[t.jsxs(a.Grid,{item:!0,sm:12,children:[t.jsxs(a.FormControl,{variant:"standard",style:l.marginRight,children:[t.jsx(a.InputLabel,{children:r.I18n.t("parser_Type")}),t.jsxs(a.Select,{value:s.common.type||"string",onChange:e=>{const n=JSON.parse(JSON.stringify(s));n.common.type=e.target.value,this.setState({showEditDialog:n},()=>this.onTest())},variant:"standard",children:[t.jsx(a.MenuItem,{value:"boolean",children:"boolean"}),t.jsx(a.MenuItem,{value:"number",children:"number"}),t.jsx(a.MenuItem,{value:"string",children:"string"}),t.jsx(a.MenuItem,{value:"json",children:"json"}),t.jsx(a.MenuItem,{value:"array",children:"array"})]})]}),s.common.type==="number"?t.jsx(a.FormControlLabel,{control:t.jsx(a.Checkbox,{checked:!!s.native.substituteOld,onChange:()=>{const e=JSON.parse(JSON.stringify(s));e.native.comma=!e.native.comma,this.setState({showEditDialog:e},()=>this.onTest())}}),label:r.I18n.t("parser_Comma")}):null]}),t.jsxs(a.Grid,{item:!0,sm:12,children:[t.jsx(a.FormControlLabel,{title:r.I18n.t("parser_If new value is not available, let old value unchanged"),style:l.marginRight,control:t.jsx(a.Checkbox,{checked:!!s.native.substituteOld,onChange:()=>{const e=JSON.parse(JSON.stringify(s));e.native.substituteOld=!e.native.substituteOld,this.setState({showEditDialog:e},()=>this.onTest())}}),label:r.I18n.t("parser_Substitute old value")}),s.native.substituteOld?null:t.jsx(a.TextField,{title:r.I18n.t("parser_If new value is not available, use this value"),style:{...l.marginRight,...l.input},value:s.native.substitute||"",onChange:e=>{const n=JSON.parse(JSON.stringify(s));n.native.substitute=e.target.value,this.setState({showEditDialog:n},()=>this.onTest())},label:r.I18n.t("parser_Substitute value"),variant:"standard"}),s.common.type==="number"?t.jsx(a.TextField,{style:{...l.marginRight,...l.input},value:s.native.factor||1,onChange:e=>{const n=JSON.parse(JSON.stringify(s));n.native.factor=e.target.value,this.setState({showEditDialog:n},()=>this.onTest())},variant:"standard",label:r.I18n.t("parser_Factor")}):null,s.common.type==="number"?t.jsx(a.TextField,{style:{...l.marginRight,...l.input},value:s.native.offset||0,onChange:e=>{const n=JSON.parse(JSON.stringify(s));n.native.offset=e.target.value,this.setState({showEditDialog:n},()=>this.onTest())},label:r.I18n.t("parser_Offset"),variant:"standard"}):null,s.common.type==="string"?t.jsx(a.FormControlLabel,{title:r.I18n.t("parser_Convert &#48; => 0 and so on"),style:l.marginRight,control:t.jsx(a.Checkbox,{checked:!!s.native.parseHtml,onChange:()=>{const e=JSON.parse(JSON.stringify(s));e.native.parseHtml=!e.native.parseHtml,this.setState({showEditDialog:e},()=>this.onTest())}}),label:r.I18n.t("parser_Parse HTML text")}):null]}),t.jsxs(a.Grid,{item:!0,sm:12,children:[t.jsx(a.TextField,{value:s.native.regex||"",onChange:e=>{const n=JSON.parse(JSON.stringify(s));n.native.regex=e.target.value,this.setState({showEditDialog:n},()=>this.onTest())},variant:"standard",style:l.regex,label:r.I18n.t("parser_RegEx")}),s.common.type!=="array"?t.jsx(a.TextField,{value:s.native.item||0,type:"number",slotProps:{htmlInput:{min:0}},onChange:e=>{const n=JSON.parse(JSON.stringify(s));n.native.item=e.target.value,this.setState({showEditDialog:n},()=>this.onTest())},variant:"standard",style:l.item,label:r.I18n.t("parser_Item")}):null,t.jsx(a.Fab,{color:"primary",size:"small",onClick:()=>this.onTest(!0),children:t.jsx(y.PlayArrow,{})})]}),t.jsx(a.Grid,{item:!0,sm:12,sx:l.testText,children:t.jsx("textarea",{ref:this.testTextRef,value:this.state.testText,onChange:e=>this.setState({testText:e.target.value},()=>this.onTest())})}),t.jsx(a.Grid,{item:!0,sm:12,children:t.jsx(a.TextField,{sx:l.resultUpdated,variant:"standard",label:r.I18n.t("parser_Result"),value:this.state.testResult.toString(),slotProps:{htmlInput:{readOnly:!0}},fullWidth:!0},this.state.resultIndex)})]})}),t.jsxs(a.DialogActions,{children:[t.jsx(a.Button,{disabled:JSON.stringify(this.state.showEditDialog)===this.state.originalRule,onClick:()=>{const e=JSON.parse(JSON.stringify(this.state.rules)),n=e.findIndex(i=>i._id===s._id);Object.assign(e[n].common,this.state.showEditDialog.common),Object.assign(e[n].native,this.state.showEditDialog.native),this.setState({showEditDialog:null,originalRule:"",rules:e},()=>this.onAutoSave(n))},color:"primary",startIcon:t.jsx(y.Save,{}),variant:"contained",children:r.I18n.t("ra_Save")}),t.jsx(a.Button,{color:"grey",onClick:()=>this.setState({showEditDialog:null,originalRule:""}),variant:"contained",startIcon:t.jsx(y.Close,{}),children:r.I18n.t("ra_Cancel")})]})]},"dialog")}checkError(){if(!this.state.rules)return!1;const s=this.state.rules.findIndex(e=>!e.common.name);if(s!==-1)return s;for(let e=0;e<this.state.rules.length;e++)for(let n=e+1;n<this.state.rules.length;n++)if(this.state.rules[e].common.name===this.state.rules[n].common.name)return n;return!1}onAutoSave(s){const e=[...this.state.changed];e.includes(s)||(e.push(s),this.setState({changed:e})),this.saveTimer&&clearTimeout(this.saveTimer),this.saveTimer=setTimeout(async()=>{this.saveTimer=null;let n=!1;const i=JSON.parse(JSON.stringify(this.state.rules)),c=[];for(let v=0;v<this.state.changed.length;v++){const o=this.state.changed[v],d=i[o];if(d.common.name&&!i.find((h,p)=>h.common.name===d.common.name&&p!==o)){const h=d._id?await this.props.oContext.socket.getObject(d._id):{common:{},native:{},type:"state"};if(!h)continue;const p=JSON.parse(JSON.stringify(h));Object.assign(p.common,d.common),Object.assign(p.native,d.native),d._id!==`${this.namespace}${d.common.name}`?(d._id&&await this.props.oContext.socket.delObject(d._id),d._id=`${this.namespace}${d.common.name}`,n=!0,p._id=d._id,c.push(p)):(JSON.stringify(h.common)!==JSON.stringify(p.common)||JSON.stringify(h.native)!==JSON.stringify(p.native))&&(p._id=d._id,c.push(p))}}const g={changed:[]};n&&(g.rules=i),this.setState(g,async()=>{for(let v=0;v<c.length;v++)await this.props.oContext.socket.setObject(c[v]._id,c[v])})},1e3)}_onChange(s,e,n,i){const c=JSON.parse(JSON.stringify(this.state.rules)),g=e?"native":"common";n==="comma"&&(c[s].common.type="number"),c[s][g][n]=i,this.setState({rules:c},()=>this.onAutoSave(s))}renderRule(s,e,n,i,c){var v;const g=!s.common.name||((v=this.state.rules)==null?void 0:v.find((o,d)=>o.common.name===s.common.name&&d!==e));return t.jsxs(a.TableRow,{style:this.state.changed.includes(e)?l.changedRow:void 0,children:[t.jsx(a.TableCell,{style:l.cell,children:e+1}),t.jsx(a.TableCell,{style:l.cell,children:t.jsx(a.Checkbox,{disabled:!!g,checked:s.common.enabled,onChange:o=>this._onChange(e,!1,"enabled",o.target.checked)})}),t.jsx(a.TableCell,{style:l.cell,children:t.jsx(a.TextField,{fullWidth:!0,value:s.common.name,error:!!g,disabled:!s.common.enabled,onChange:o=>{const d=JSON.parse(JSON.stringify(this.state.rules));d[e].common.name=o.target.value;const h=this.checkError();this.setState({rules:d,error:h},()=>this.onAutoSave(e))},variant:"standard"})}),t.jsx(a.TableCell,{style:l.cell,children:t.jsx(a.TextField,{fullWidth:!0,disabled:!!g||!s.common.enabled,value:s.native.link,onChange:o=>this._onChange(e,!0,"link",o.target.value),variant:"standard"})}),t.jsx(a.TableCell,{style:l.cell,children:t.jsx(a.TextField,{disabled:!!g||!s.common.enabled,fullWidth:!0,value:s.native.regex,onChange:o=>this._onChange(e,!0,"regex",o.target.value),variant:"standard"})}),c?t.jsx(a.TableCell,{style:l.cell,children:s.common.type!=="array"?t.jsx(a.TextField,{fullWidth:!0,disabled:!!g||!s.common.enabled,value:s.native.item,type:"number",onChange:o=>this._onChange(e,!0,"item",o.target.value),variant:"standard"}):null}):null,t.jsx(a.TableCell,{style:l.cell,children:t.jsxs(a.Select,{fullWidth:!0,disabled:!!g||!s.common.enabled,value:s.common.role||"",onChange:o=>this._onChange(e,!1,"role",o.target.value),variant:"standard",children:[t.jsx(a.MenuItem,{value:"state",children:"default"}),t.jsx(a.MenuItem,{value:"",children:"custom"}),t.jsx(a.MenuItem,{value:"temperature",children:"temperature"}),t.jsx(a.MenuItem,{value:"value",children:"value"}),t.jsx(a.MenuItem,{value:"blinds",children:"blinds"}),t.jsx(a.MenuItem,{value:"switch",children:"switch"}),t.jsx(a.MenuItem,{value:"indicator",children:"indicator"})]})}),t.jsx(a.TableCell,{style:l.cell,children:t.jsxs(a.Select,{fullWidth:!0,disabled:!!g||!s.common.enabled,value:s.common.type||"string",onChange:o=>this._onChange(e,!1,"type",o.target.value),variant:"standard",children:[t.jsx(a.MenuItem,{value:"boolean",children:"boolean"}),t.jsx(a.MenuItem,{value:"number",children:"number"}),t.jsx(a.MenuItem,{value:"string",children:"string"}),t.jsx(a.MenuItem,{value:"json",children:"json"})]})}),n?t.jsx(a.TableCell,{style:l.cell,children:s.common.type==="number"?t.jsx(a.Checkbox,{disabled:!!g||!s.common.enabled,checked:!!s.native.comma,onChange:o=>this._onChange(e,!0,"comma",o.target.checked)}):null}):null,n?t.jsx(a.TableCell,{style:l.cell,children:t.jsx(a.TextField,{fullWidth:!0,disabled:!!g||!s.common.enabled,value:s.common.unit,onChange:o=>this._onChange(e,!1,"unit",o.target.value),variant:"standard"})}):null,t.jsx(a.TableCell,{style:l.cell,title:r.I18n.t("parser_If new value is not available, let old value unchanged"),children:t.jsx(a.Checkbox,{disabled:!!g||!s.common.enabled,checked:!!s.native.substituteOld,onChange:o=>this._onChange(e,!0,"substituteOld",o.target.checked)})}),i?t.jsx(a.TableCell,{title:r.I18n.t("parser_If new value is not available, use this value"),style:l.cell,children:s.native.substituteOld?null:t.jsx(a.TextField,{disabled:!!g||!s.common.enabled,fullWidth:!0,value:s.native.substituteOld?"":s.native.substitute,onChange:o=>this._onChange(e,!0,"substitute",o.target.value),variant:"standard"})}):null,n?t.jsx(a.TableCell,{style:l.cell,children:s.common.type==="number"?t.jsx(a.TextField,{disabled:!!g||!s.common.enabled,fullWidth:!0,value:s.native.factor,onChange:o=>this._onChange(e,!0,"factor",o.target.value),variant:"standard"}):null}):null,n?t.jsx(a.TableCell,{style:l.cell,children:s.common.type==="number"?t.jsx(a.TextField,{disabled:!!g||!s.common.enabled,fullWidth:!0,value:s.native.offset,onChange:o=>this._onChange(e,!0,"offset",o.target.value),variant:"standard"}):null}):null,t.jsx(a.TableCell,{title:r.I18n.t("parser_Leave it empty if default interval is desired"),style:l.cell,children:t.jsx(a.TextField,{disabled:!!g||!s.common.enabled,fullWidth:!0,value:s.native.interval,type:"number",onChange:o=>this._onChange(e,!0,"interval",o.target.value),variant:"standard"})}),t.jsxs(a.TableCell,{style:l.cell,children:[t.jsx(a.IconButton,{size:"small",disabled:!!g||!s.common.enabled,onClick:()=>this.setState({showEditDialog:JSON.parse(JSON.stringify(this.state.rules[e])),originalRule:JSON.stringify(this.state.rules[e])},()=>this.requestData(this.state.rules[e].native.link)),children:t.jsx(y.Edit,{})}),t.jsx(a.IconButton,{size:"small",onClick:()=>this.setState({showDeleteDialog:e}),children:t.jsx(y.Delete,{})}),t.jsx(a.IconButton,{size:"small",disabled:!!g||!s.common.enabled,onClick:async()=>{const o=JSON.parse(JSON.stringify(this.state.rules[e]));let d=1,h=o.common.name;const p=h.match(/(\d+)$/);for(p?(h=h.replace(p[0],""),d=parseInt(p[0],10)+1):h+="_";this.state.rules.find(T=>T.common.name===h+d.toString());)d++;o.common.name=h+d.toString(),o._id=`${this.namespace}${o.common.name}`,await this.props.oContext.socket.setObject(`${this.namespace}${o.common.name}`,{type:"state",common:s.common,native:s.native})},children:t.jsx(y.ContentCopy,{})})]})]},`${e}_${s._id}`)}renderDeleteDialog(){return this.state.showDeleteDialog===null?null:t.jsx(r.Confirm,{text:r.I18n.t("parser_Delete rule"),ok:r.I18n.t("ra_Delete"),onClose:s=>{if(s){const e=this.state.rules[this.state.showDeleteDialog]._id,n=JSON.parse(JSON.stringify(this.state.rules));n.splice(this.state.showDeleteDialog,1),this.setState({rules:n,showDeleteDialog:null},async()=>{e&&await this.props.oContext.socket.delObject(e)})}else this.setState({showDeleteDialog:null})}})}onTest(s){this.timerTest&&clearTimeout(this.timerTest),this.state.showEditDialog&&(this.timerTest=setTimeout(()=>{if(!this.state.showEditDialog)return;let e=this.state.testText,n=this.state.showEditDialog.native.regex;const i=this.state.showEditDialog.common.type,c=this.state.showEditDialog.native.comma,g=this.state.showEditDialog.native.offset,v=this.state.showEditDialog.native.item,o=this.state.showEditDialog.native.factor,d=this.state.showEditDialog.native.parseHtml==="true"||this.state.showEditDialog.native.parseHtml===!0;let h=this.state.showEditDialog.native.substitute;n||(n=".+"),n[0]==="/"&&(n=n.substring(1,n.length-1)),h!==""&&h!==void 0&&h!==null?(h==="null"&&(h=null),i==="number"?h=parseFloat(h)||0:i==="boolean"&&(h==="true"&&(h=!0),h==="false"&&(h=!1),h=!!h)):h=void 0;let p;try{p=new RegExp(n,v||i==="array"?"g":"")}catch(u){this.setState({testError:u.toString()});return}const T=parseFloat(g)||0,I=parseFloat(o)||1;let S=(parseInt(v,10)||0)+1;S<0&&(S=1),S>1e3&&(S=1e3),e=(e||"").toString().replace(/\r\n|[\r\n]/g," ");let f;if(i==="array")f=e.match(p);else do f=p.exec(e),S--;while(S&&f);if(f){let u;if(i==="boolean")u="true";else if(i!=="array")u=f.length>1?f[1]:f[0],i==="number"&&(c?(u=u.replace(/\./g,""),u=u.replace(",",".")):u=u.replace(/,/g,""),u=u.replace(/\s/g,""),u=parseFloat(u),u*=I,u+=T);else{if(n.includes("(")){const _=new RegExp(n);f=f==null?void 0:f.map(m=>{const b=m.match(_);return b&&b[1]?b[1]:m})}d?u=JSON.stringify(f==null?void 0:f.map(_=>_.replace(/&#(\d+);/g,(m,b)=>String.fromCharCode(b)))):u=JSON.stringify(f)}d&&i==="string"&&(u=u==null?"":u.toString(),u=u.replace(/&#(\d+);/g,(_,m)=>String.fromCharCode(m))),this.setState({testResult:u??"",resultIndex:this.state.resultIndex+1},()=>{if(f){const _=f[1]?f[0].indexOf(f[1]):0,m=this.testTextRef.current,b=(f.index||0)+_,j=(f.index||0)+_+(f[1]?f[1].length:f[0].length);if(m!=null&&m.setSelectionRange){m.focus();const C=m.value;m.value=C.substring(0,j);const w=m.scrollHeight;m.scrollTop=w,m.value=C,m.scrollTop=w-30,m==null||m.setSelectionRange(b,j)}else if(m!=null&&m.createTextRange){const C=m.createTextRange();C.collapse(!0),C.moveEnd("character",j),C.moveStart("character",b),C.select()}else m!=null&&m.selectionStart&&(m.selectionStart=b,m.selectionEnd=j)}})}else i==="boolean"?this.setState({testResult:"false",resultIndex:this.state.resultIndex+1}):this.setState({testResult:h??"",resultIndex:this.state.resultIndex+1})},s?0:1e3))}renderItem(){if(!this.state.rules)return t.jsx(a.LinearProgress,{});const s=!!this.state.rules.find(i=>i.common.type==="number"),e=!!this.state.rules.find(i=>!i.native.substituteOld),n=!!this.state.rules.find(i=>i.common.type!=="array");return t.jsxs(a.TableContainer,{component:a.Paper,children:[t.jsx("style",{children:`
@keyframes admin-parser-blink {
    0% {
        color: #00FF00;
    }
    100% {
        color: ${this.props.oContext.themeType==="dark"?"#fff":"#000"};
    }
}
`}),this.renderEditDialog(),this.renderDeleteDialog(),t.jsxs(a.Table,{size:"small",children:[t.jsx(a.TableHead,{children:t.jsxs(a.TableRow,{children:[t.jsx(a.TableCell,{style:{...l.cell,...l.colIndex}}),t.jsx(a.TableCell,{style:{...l.cell,...l.colActive},children:r.I18n.t("parser_Active")}),t.jsx(a.TableCell,{style:{...l.cell,...l.colName},children:r.I18n.t("parser_Name")}),t.jsx(a.TableCell,{style:{...l.cell,...l.colUrl},children:r.I18n.t("parser_URL or file name")}),t.jsx(a.TableCell,{style:{...l.cell,...l.colRegEx},children:r.I18n.t("parser_RegEx")}),n?t.jsx(a.TableCell,{style:{...l.cell,...l.colItem},children:r.I18n.t("parser_Item")}):null,t.jsx(a.TableCell,{style:{...l.cell,...l.colRole},children:r.I18n.t("parser_Role")}),t.jsx(a.TableCell,{style:{...l.cell,...l.colType},children:r.I18n.t("parser_Type")}),s?t.jsx(a.TableCell,{style:{...l.cell,...l.colComma},children:r.I18n.t("parser_Comma")}):null,s?t.jsx(a.TableCell,{style:{...l.cell,...l.colUnit},children:r.I18n.t("parser_Unit")}):null,t.jsx(a.TableCell,{style:{...l.cell,...l.colSubstituteOld},title:r.I18n.t("parser_If new value is not available, let old value unchanged"),children:r.I18n.t("parser_Old")}),e?t.jsx(a.TableCell,{style:{...l.cell,...l.colSubstitute},title:r.I18n.t("parser_If new value is not available, use this value"),children:r.I18n.t("parser_Subs")}):null,s?t.jsx(a.TableCell,{style:{...l.cell,...l.colFactor},children:r.I18n.t("parser_Factor")}):null,s?t.jsx(a.TableCell,{style:{...l.cell,...l.colOffset},children:r.I18n.t("parser_Offset")}):null,t.jsx(a.TableCell,{style:{...l.cell,...l.colInterval},title:r.I18n.t("parser_Leave it empty if default interval is desired"),children:r.I18n.t("parser_Interval")}),t.jsx(a.TableCell,{style:{...l.cell,...l.colButtons},children:t.jsx(a.Fab,{size:"small",color:"primary",onClick:()=>{const i=JSON.parse(JSON.stringify(this.state.rules));i.push({_id:"",common:{name:"",enabled:!0,role:"state",type:"string",unit:"",read:!0,write:!1},native:{link:"",item:0,regex:"",interval:"",substitute:"",substituteOld:!0,offset:0,factor:1,parseHtml:!1}}),this.setState({rules:i})},children:t.jsx(y.Add,{})})})]})}),t.jsx(a.TableBody,{children:this.state.rules.map((i,c)=>this.renderRule(i,c,s,e,n))})]})]})}}export{P};
